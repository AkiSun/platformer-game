# 平台跳跃游戏 Demo - 需求文档

## 项目概述
开发一个基于 Godot Engine 的平台跳跃游戏 Demo，支持 PC 和手机双端操作。

## 游戏功能

### 核心玩法
- ✅ 单场景游戏，包含玩家角色和敌人
- ✅ 敌人生成机制：
  - 游戏开始后 5 秒延迟刷新第 1 个敌人
  - 击败当前敌人后立即刷新下一个
  - 共 5 个敌人
- ✅ 胜负条件：
  - 角色血量归 0 → 游戏失败
  - 5 个敌人全部击败 → 游戏胜利

### 角色能力
- **移动**：左右移动
- **跳跃**：普通跳跃
- **冲刺**：快速位移 + 无敌帧（躲避敌人攻击）
- **攻击**：对敌人造成伤害
- **血条**：显示在角色头顶，归 0 则死亡

### 敌人 AI
- **巡逻模式**：默认在固定路径巡逻
- **追击模式**：发现角色后主动追击
- **血条**：显示在敌人头顶，归 0 则死亡

### 平台设计
- **地面**：大平台作为主地面
- **斜坡**：可攀爬的斜坡地形
- **浮空平台**：空中悬浮的平台
- **梯子**：连接不同平台的梯子
- **优化机制**：
  - 跳起不会磕头（头部碰撞检测优化）
  - 下 + 跳：可跳下平台
  - 上 + 跳：可爬上梯子

## 操控方式

### PC 端（键盘映射）
| 按键 | 功能 |
|------|------|
| A / ← | 左移动 |
| D / → | 右移动 |
| W / ↑ | 跳跃 / 爬上梯子 |
| S / ↓ | 下平台 / 下梯子 |
| Space | 冲刺 |
| J / Z | 攻击 |
| K / X | 防御 |

### 手机端（虚拟按钮）
- 左/右移动按钮
- 跳跃按钮
- 冲刺按钮
- 攻击按钮

## UI 界面
- ✅ 胜利界面：击败所有敌人后显示
- ✅ 失败界面：角色死亡后显示
- ✅ 重新开始按钮
- ✅ 血条显示（角色和敌人头顶）

## 游戏视觉设计

### 整体风格定位
- **风格**：简约且色彩明亮的卡通风格（Cartoon Style）
- **特点**：扁平化设计、流畅的线条、清晰的轮廓、略带手绘质感的视觉效果
- **目标**：营造轻松愉快的游戏氛围，适合全年龄段玩家

### 配色方案建议
- **主色调**：以暖色调为主（橙色、黄色），传递活力与快乐的感觉
- **辅助色**：绿色（草地、自然元素）、蓝色（天空、奖励道具）
- **对比色**：红色（敌人、危险区域）、紫色（特殊技能、传送门）
- **色彩饱和度**：中等到高饱和度，避免过于灰暗的色调
- **色彩一致性**：保持整体画面色彩协调，避免使用过多不协调的顏色

### 视差滚动背景（Parallax Scrolling）
实现多层视差滚动背景，营造深度感和动态效果：

- **第1层 - 远景（天空层）**：
  - 元素：渐变天空、云朵、远山剪影
  - 移动速度：最慢（0.1x 游戏速度）
  - 颜色：淡蓝至浅紫渐变，营造开阔感

- **第2层 - 中景（远景层）**：
  - 元素：树木剪影、山丘、建筑物轮廓
  - 移动速度：慢速（0.3x 游戏速度）
  - 颜色：柔和的绿色或蓝紫色，与前景形成层次

- **第3层 - 近景（中景层）**：
  - 元素：草丛、灌木丛、岩石、小型建筑
  - 移动速度：中速（0.5x 游戏速度）
  - 颜色：较饱和的绿色或棕色，丰富画面细节

- **前景层（游戏场景）**：
  - 元素：平台、梯子、角色、敌人
  - 移动速度：正常（1.0x 游戏速度）
  - **视差效果**：前景相对于相机移动时保持精确对齐

### 角色视觉设计
- **主角设计**：
  - 外观：可爱的卡通角色，简洁的几何形状（圆形/圆角矩形）
  - 颜色：明亮的橙色或黄色为主色，与背景形成良好对比
  - 特征：大眼睛、表情丰富、有明显的动作反馈
  - 动画：流畅的行走、跳跃、冲刺、攻击动画

- **动画帧数建议**：
  - 行走：4-6 帧循环
  - 跳跃：3-5 帧（含起跳、空中、落地）
  - 攻击：3-4 帧（含攻击动作和收招）
  - 冲刺：2-3 帧（含残影效果）

### 敌人视觉设计
- **外观**：
  - 风格：与主角保持一致的卡通风格
  - 颜色：红色或紫色为主色，表示敌对关系
  - 特征：有明显的攻击意图表达（如愤怒的表情、张牙舞爪的动作）
  - 大小：比主角略大，增加压迫感
- **类型区分**：通过颜色或形状区分不同类型的敌人（如红色近战、紫色远程）
- **死亡效果**：击败敌人时有明显的视觉反馈（如粒子效果、消失动画）

### 平台和环境视觉风格
- **地面平台**：
  - 颜色：绿色（草地风格）或棕色（木质风格）
  - 纹理：简洁的纹理或图案，避免过于复杂
  - 边缘：圆角设计，避免尖锐感

- **浮空平台**：
  - 颜色：与地面平台区分（如浅棕色、云朵白色）
  - 视觉效果：有轻微的悬浮感（可添加阴影或粒子效果）

- **斜坡设计**：
  - 渐变过渡：平滑的角度变化，与周围环境协调
  - 颜色：与地面平台一致或有渐变效果

- **梯子**：
  - 颜色：木质棕色或金属灰色
  - 风格：简洁的线条设计，与整体卡通风格一致

- **装饰元素**：
  - 添加花朵、蝴蝶、星星等装饰物
  - 避免环境过于单调，但不要干扰游戏玩法
  - 装饰物可以是视差背景的一部分

## 技术要求
- **游戏引擎**：Godot Engine 4.x
- **项目类型**：2D 平台跳跃游戏
- **节点架构**：使用 Godot 节点系统（Node2D, CharacterBody2D, Area2D 等）
- **响应式设计**：适配 PC 和手机屏幕
- **性能优化**：流畅的 60fps 游戏体验
- **输入处理**：支持键盘和触屏双输入

## Godot 项目结构

```
platformer-game/
├── project.godot              # Godot 项目配置文件
├── export_presets.cfg         # 导出配置（Web 平台）
├── icon.svg                   # 项目图标
├── assets/                    # 资源目录
│   ├── sprites/               # 精灵图片
│   │   ├── player/            # 玩家精灵
│   │   │   ├── idle.png
│   │   │   ├── run.png
│   │   │   ├── jump.png
│   │   │   ├── attack.png
│   │   │   └── dash.png
│   │   ├── enemy/             # 敌人精灵
│   │   │   ├── patrol.png
│   │   │   └── chase.png
│   │   ├── tileset/          # 瓦片集
│   │   │   └── terrain.png
│   │   └── ui/                # UI 资源
│   │       └── buttons/
│   ├── sounds/                # 音效资源（可选）
│   └── fonts/                 # 字体资源
├── scenes/                    # 场景目录
│   ├── Main.tscn              # 主游戏场景
│   ├── Player.tscn            # 玩家角色场景
│   ├── Enemy.tscn             # 敌人场景
│   ├── Platform.tscn          # 平台场景
│   ├── Ladder.tscn            # 梯子场景
│   ├── Background.tscn        # 背景场景
│   └── UI/
│       ├── GameUI.tscn        # 游戏 UI 场景
│       ├── VictoryScreen.tscn # 胜利界面
│       └── DefeatScreen.tscn  # 失败界面
├── scripts/                   # 脚本目录
│   ├── Main.gd                # 主游戏脚本
│   ├── Player.gd              # 玩家控制脚本
│   ├── Enemy.gd               # 敌人 AI 脚本
│   ├── Platform.gd            # 平台脚本
│   ├── Ladder.gd              # 梯子脚本
│   ├── Camera2D.gd            # 摄像机脚本
│   ├── ParallaxBackground.gd  # 视差背景脚本
│   ├── EnemyManager.gd        # 敌人生成管理器
│   └── UIManager.gd           # UI 管理器
└── README.md
```

## Web 导出说明

### 导出配置
- **目标平台**：Web（HTML5）
- **导出格式**：.html + .wasm + .pck
- **渲染模式**：Canvas（兼容模式）或 WebGL（高性能）

### 导出步骤
1. 在 Godot 编辑器中：`项目` → `导出`
2. 添加 `Web` 导出预设
3. 配置导出路径：`export/web/index.html`
4. 点击 `导出项目`

### 部署要求
- **GitHub 仓库**：AkiSun/platformer-game
- **部署平台**：GitHub Pages
- **访问地址**：https://akisun.github.io/platformer-game/
- **必要文件**：
  - `index.html`
  - `index.js`
  - `index.pck`（或 `.wasm`）

## 交付物
1. 完整的 Godot 项目源代码
2. REQUIREMENTS.md（需求文档）
3. PLAN.md（实施计划）
4. TODO.md（任务拆分）
5. README.md（项目说明）
6. 导出的 Web 版本游戏
7. 部署上线的游戏页面

---

## 需求确认

请确认以上需求是否正确，确认后我将开始制定实施计划。

- [ ] 需求确认无误，开始开发
- [ ] 需要修改需求
